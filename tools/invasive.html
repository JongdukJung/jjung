<!DOCTYPE html>
<style type="text/css"> html, body { margin: 0px; height:100%; overflow:hidden; }  </style>
             <style> h1 {color : #0101DF; font-weight: bold; font-size: 12pt;} </style>
             <style> h2 {color : #FFF000; font-size: 11pt;} </style>
             <style> h3 {color : #FF0000;  font-size: 10pt;} </style>


<html>
<head>
    <meta charset="utf-8">
    <title>충남 외래식물 조사</title>
    
</head>
<meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, width=device-width">

<body>
<div id="map" style="margin: 0px; width:100%; height:80%;"></div>
    

<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=3a7857a3bd564cf642a647203f178f40"></script>

<script>
var mapContainer = document.getElementById('map'), // 지도를 표시할 div 
    mapOption = { 
        center: new kakao.maps.LatLng(35.18743678324219, 128.3086201888794), // 지도의 중심좌표(D구역 중심)
        level: 6 // 지도의 확대 레벨
    };  

var map = new kakao.maps.Map(mapContainer, mapOption); // 지도를 생성합니다

// 일반 지도와 스카이뷰로 지도 타입을 전환할 수 있는 지도타입 컨트롤을 생성합니다
var mapTypeControl = new kakao.maps.MapTypeControl();

// 지도에 컨트롤을 추가해야 지도위에 표시됩니다
// kakao.maps.ControlPosition은 컨트롤이 표시될 위치를 정의하는데 TOPRIGHT는 오른쪽 위를 의미합니다
map.addControl(mapTypeControl, kakao.maps.ControlPosition.TOPRIGHT);

kakao.maps.event.addListener(map, 'click', function(mouseEvent) {        
    // 클릭한 위도, 경도 정보를 가져옵니다 
    var latlng = mouseEvent.latLng;
    var message = latlng.getLat() + ', ';
    message += + latlng.getLng();
    var resultDiv = document.getElementById('result'); 
    resultDiv.innerHTML = message;
    
    var link = 'https://map.kakao.com/link/to/목적지,'+ message;
    document.getElementById("link").setAttribute("href",link);

    displayMarker3(latlng);
});

// D구역 중심시로 이동
function chungju(){
var locPosition = new kakao.maps.LatLng(35.18743678324219, 128.3086201888794); // 지도의 중심좌표(D구역 중심)
map.setCenter(locPosition);   
}

chungju();
 </script>

<p>
<button onclick="displayMarker2()">현재위치</button> 
<button onclick="chungju()">D구역 중심지</button>
<button id="polygonNameBtn" onclick="polygonNameClickHandler()">폴리곤이름 켜기</button>
<a id="link">길 찾기</a>
</p>
<p id="result"></p>

<script>  
 
//----------------------------------------------------------------
// HTML5의 geolocation으로 사용할 수 있는지 확인합니다 
function displayMarker2() {
if (navigator.geolocation) {
    // GeoLocation을 이용해서 접속 위치를 얻어옵니다
    navigator.geolocation.getCurrentPosition(function(position) {
        var lat = position.coords.latitude, // 위도
            lon = position.coords.longitude; // 경도
        var locPosition = new kakao.maps.LatLng(lat, lon); // 마커가 표시될 위치를 geolocation으로 얻어온 좌표로 생성합니다
        displayMarker(locPosition);
    });
}
else { // HTML5의 GeoLocation을 사용할 수 없을때 마커 표시 위치와 인포윈도우 내용을 설정합니다
    alert('현재 위치를 알 수 없습니다');
	var locPosition = new kakao.maps.LatLng(35.18743678324219, 128.3086201888794); // 지도의 중심좌표(D구역 중심)
        displayMarker(locPosition);
}
}


// 마커 표시하고 센터 이동하기
function displayMarker(locPosition) {
     
// 지도에 마커와 인포윈도우를 표시하는 함수입니다

    // 마커를 생성합니다
    var imageSrc = 'https://jongdukjung.github.io/jongdukjung/biotope/current.png'; // 마커이미지의 주소입니다   
    // 마커 이미지의 이미지 크기 입니다
    var imageSize = new kakao.maps.Size(12, 12); 
    
    // 마커 이미지를 생성합니다    
    var markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize); 	
	var marker = new kakao.maps.Marker({  
        map: map, 
        position: locPosition,
		image: markerImage
    }); 
     
    // 지도 중심좌표를 접속위치로 변경합니다
	map.setCenter(locPosition);      
}

// 센터이동없이 마커 표시하기
function displayMarker3(locPosition) {
    var imageSrc = 'https://jongdukjung.github.io/jongdukjung/biotope/target.png'; // 마커이미지의 주소입니다   
    var imageSize = new kakao.maps.Size(12, 12); 
    var markerImage = new kakao.maps.MarkerImage(imageSrc, imageSize); 	
	var marker = new kakao.maps.Marker({  
        map: map, 
        position: locPosition,
		image: markerImage
    }); 
    kakao.maps.event.addListener(marker, 'click', function() {
        marker.setVisible(false);
        marker = null;
    });
}  




// 번호를 표시할 위치와 title 객체 배열입니다 
const NUM_POSITIONS = [
{title: '<h1>D04</h1>', latlng: new kakao.maps.LatLng(35.2374999938, 128.287499914)},

];

//격자번호 표시하기
for (var i = 0; i < NUM_POSITIONS.length; i ++) {
// 커스텀 오버레이를 생성합니다
var customOverlay = new kakao.maps.CustomOverlay({
    position: NUM_POSITIONS[i].latlng,
    content: NUM_POSITIONS[i].title
});
customOverlay.setMap(map);
};

var reader = new XMLHttpRequest();
	reader.open('GET', '/jongdukjung/tools/data/a.txt', true);
	reader.overrideMimeType('text/plain; charset=utf-8');
	reader.onload = function() {
		if (reader.status == 200) {
			console.log(reader.responseText);
		};
	};
reader.send(null);

// 격자 배열입니다.
var polygonPaths2 = reader;

//var polygonPaths2 = [
//[new kakao.maps.LatLng(35.16304660570, 128.31644939200), new kakao.maps.LatLng(35.16282098700, 128.31670399300), new kakao.maps.LatLng(35.16276901780, 128.31678949800), new kakao.maps.LatLng(35.16269052720, 128.31693106500), new kakao.maps.LatLng(35.16258375030, 128.31719872400), new kakao.maps.LatLng(35.16255404160, 128.31728369200), new kakao.maps.LatLng(35.16253975950, 128.31733192100), new kakao.maps.LatLng(35.16253369910, 128.31738153800), new kakao.maps.LatLng(35.16253336630, 128.31743077900), new kakao.maps.LatLng(35.16253710570, 128.31746001100), new kakao.maps.LatLng(35.16254160660, 128.31747434900), new kakao.maps.LatLng(35.16251137340, 128.31751168000), new kakao.maps.LatLng(35.16248826100, 128.31754762300), new kakao.maps.LatLng(35.16243030860, 128.31766843900), new kakao.maps.LatLng(35.16242735240, 128.31767310600), new kakao.maps.LatLng(35.16239622980, 128.31773948200), new kakao.maps.LatLng(35.16237865660, 128.31777695900), new kakao.maps.LatLng(35.16209608540, 128.31836860600), new kakao.maps.LatLng(35.16181852500, 128.31898808800), new kakao.maps.LatLng(35.16166800750, 128.31929304600), new kakao.maps.LatLng(35.16164079930, 128.31932762500), new kakao.maps.LatLng(35.16162355900, 128.31933830000), new kakao.maps.LatLng(35.16159634720, 128.31934094500), new kakao.maps.LatLng(35.16158744020, 128.31933838700), new kakao.maps.LatLng(35.16157599060, 128.31932748600), new kakao.maps.LatLng(35.16156579600, 128.31931777900), new kakao.maps.LatLng(35.16153424690, 128.31928161100), new kakao.maps.LatLng(35.16153400220, 128.31928120200), new kakao.maps.LatLng(35.16148558680, 128.31923099200), new kakao.maps.LatLng(35.16139630860, 128.31916976700), new kakao.maps.LatLng(35.16139647810, 128.31916143400), new kakao.maps.LatLng(35.16141291670, 128.31910657500), new kakao.maps.LatLng(35.16142881550, 128.31905351700), new kakao.maps.LatLng(35.16143325510, 128.31904158100), new kakao.maps.LatLng(35.16147185350, 128.31890121000), new kakao.maps.LatLng(35.16147261630, 128.31889098400), new kakao.maps.LatLng(35.16147749460, 128.31879021000), new kakao.maps.LatLng(35.16156384980, 128.31861771200), new kakao.maps.LatLng(35.16155450390, 128.31858856700), new kakao.maps.LatLng(35.16152687070, 128.31858248000), new kakao.maps.LatLng(35.16151658600, 128.31855100100), new kakao.maps.LatLng(35.16153018900, 128.31851511400), new kakao.maps.LatLng(35.16155672250, 128.31840150000), new kakao.maps.LatLng(35.16157916350, 128.31832851600), new kakao.maps.LatLng(35.16163807830, 128.31822452000), new kakao.maps.LatLng(35.16166624480, 128.31815159400), new kakao.maps.LatLng(35.16172067810, 128.31800455800), new kakao.maps.LatLng(35.16175772350, 128.31788872600), new kakao.maps.LatLng(35.16178229300, 128.31778322400), new kakao.maps.LatLng(35.16181569320, 128.31764178800), new kakao.maps.LatLng(35.16185254230, 128.31755500400), new kakao.maps.LatLng(35.16189755700, 128.31738928100), new kakao.maps.LatLng(35.16191843460, 128.31726515000), new kakao.maps.LatLng(35.16195454830, 128.31714581900), new kakao.maps.LatLng(35.16198755700, 128.31706248200), new kakao.maps.LatLng(35.16202970120, 128.31689789200), new kakao.maps.LatLng(35.16208085290, 128.31672045600), new kakao.maps.LatLng(35.16208359370, 128.31668926100), new kakao.maps.LatLng(35.16209252640, 128.31663822100), new kakao.maps.LatLng(35.16212192880, 128.31652347000), new kakao.maps.LatLng(35.16215002430, 128.31646099900), new kakao.maps.LatLng(35.16221002400, 128.31633725900), new kakao.maps.LatLng(35.16224974190, 128.31624934000), new kakao.maps.LatLng(35.16231642150, 128.31612566700), new kakao.maps.LatLng(35.16238087910, 128.31604845300), new kakao.maps.LatLng(35.16242893460, 128.31599780100), new kakao.maps.LatLng(35.16250829970, 128.31594011000), new kakao.maps.LatLng(35.16253013300, 128.31592099700), new kakao.maps.LatLng(35.16257342490, 128.31590307300), new kakao.maps.LatLng(35.16263052470, 128.31589383500), new kakao.maps.LatLng(35.16269316610, 128.31588637800), new kakao.maps.LatLng(35.16276268400, 128.31588580700), new kakao.maps.LatLng(35.16286557990, 128.31588407800), new kakao.maps.LatLng(35.16289615970, 128.31588457000), new kakao.maps.LatLng(35.16291561950, 128.31588488400), new kakao.maps.LatLng(35.16293786020, 128.31588524400), new kakao.maps.LatLng(35.16295880110, 128.31587711500), new kakao.maps.LatLng(35.16306975650, 128.31583528400), new kakao.maps.LatLng(35.16309340980, 128.31586280300), new kakao.maps.LatLng(35.16310812410, 128.31589200100), new kakao.maps.LatLng(35.16311920090, 128.31592988000), new kakao.maps.LatLng(35.16312602470, 128.31597933500), new kakao.maps.LatLng(35.16312754470, 128.31610790500), new kakao.maps.LatLng(35.16312672770, 128.31622918700), new kakao.maps.LatLng(35.16311453110, 128.31626901100), new kakao.maps.LatLng(35.16309052840, 128.31629056000), new kakao.maps.LatLng(35.16306229250, 128.31632078200), new kakao.maps.LatLng(35.16304463470, 128.31637435300), new kakao.maps.LatLng(35.16304434650, 128.31641720000), new kakao.maps.LatLng(35.16304660570, 128.31644939200)],
//[new kakao.maps.LatLng(35.15081951170, 128.31941050300), new kakao.maps.LatLng(35.15106401020, 128.31886536000), new kakao.maps.LatLng(35.15078332630, 128.31869741700), new kakao.maps.LatLng(35.15082270210, 128.31860042100), new kakao.maps.LatLng(35.15088108590, 128.31843369100), new kakao.maps.LatLng(35.15101793290, 128.31806610300), new kakao.maps.LatLng(35.15107910790, 128.31790985900), new kakao.maps.LatLng(35.15112463160, 128.31781039100), new kakao.maps.LatLng(35.15119623600, 128.31766861400), new kakao.maps.LatLng(35.15124845060, 128.31756298300), new kakao.maps.LatLng(35.15128344390, 128.31749795900), new kakao.maps.LatLng(35.15131126630, 128.31744625900), new kakao.maps.LatLng(35.15138662160, 128.31730990900), new kakao.maps.LatLng(35.15142142760, 128.31724286500), new kakao.maps.LatLng(35.15146652380, 128.31715192300), new kakao.maps.LatLng(35.15151582680, 128.31713333600), new kakao.maps.LatLng(35.15154703540, 128.31715823500), new kakao.maps.LatLng(35.15168131550, 128.31725203900), new kakao.maps.LatLng(35.15176466130, 128.31729391900), new kakao.maps.LatLng(35.15180285200, 128.31730272600), new kakao.maps.LatLng(35.15186756180, 128.31730288800), new kakao.maps.LatLng(35.15193805450, 128.31735403900), new kakao.maps.LatLng(35.15202873050, 128.31743026400), new kakao.maps.LatLng(35.15205507950, 128.31750374200), new kakao.maps.LatLng(35.15207702320, 128.31757521600), new kakao.maps.LatLng(35.15208111340, 128.31764497600), new kakao.maps.LatLng(35.15206789800, 128.31769908300), new kakao.maps.LatLng(35.15204127120, 128.31775487800), new kakao.maps.LatLng(35.15202914250, 128.31778028700), new kakao.maps.LatLng(35.15200763680, 128.31783347100), new kakao.maps.LatLng(35.15201092830, 128.31788963300), new kakao.maps.LatLng(35.15202316710, 128.31799906000), new kakao.maps.LatLng(35.15202033400, 128.31807140900), new kakao.maps.LatLng(35.15199921310, 128.31816288400), new kakao.maps.LatLng(35.15197372620, 128.31829365000), new kakao.maps.LatLng(35.15197354690, 128.31835981500), new kakao.maps.LatLng(35.15197340180, 128.31837312600), new kakao.maps.LatLng(35.15197727380, 128.31838286900), new kakao.maps.LatLng(35.15203938540, 128.31842986500), new kakao.maps.LatLng(35.15205609660, 128.31844707900), new kakao.maps.LatLng(35.15206382480, 128.31846777900), new kakao.maps.LatLng(35.15209265320, 128.31855751200), new kakao.maps.LatLng(35.15210662440, 128.31863772500), new kakao.maps.LatLng(35.15211286330, 128.31865820500), new kakao.maps.LatLng(35.15217399270, 128.31877292200), new kakao.maps.LatLng(35.15219312550, 128.31880547500), new kakao.maps.LatLng(35.15226290550, 128.31889944500), new kakao.maps.LatLng(35.15227566740, 128.31891417500), new kakao.maps.LatLng(35.15228951330, 128.31892803200), new kakao.maps.LatLng(35.15229194180, 128.31892777800), new kakao.maps.LatLng(35.15241189390, 128.31903619100), new kakao.maps.LatLng(35.15240649000, 128.31904510400), new kakao.maps.LatLng(35.15227203660, 128.31926682800), new kakao.maps.LatLng(35.15200550720, 128.31969902700), new kakao.maps.LatLng(35.15181200730, 128.32000450400), new kakao.maps.LatLng(35.15179017650, 128.32003896800), new kakao.maps.LatLng(35.15175550880, 128.32006813200), new kakao.maps.LatLng(35.15173164370, 128.32006934500), new kakao.maps.LatLng(35.15171498400, 128.32006336900), new kakao.maps.LatLng(35.15168532130, 128.32003983300), new kakao.maps.LatLng(35.15150618420, 128.31989424900), new kakao.maps.LatLng(35.15138038800, 128.31979858400), new kakao.maps.LatLng(35.15129139180, 128.31972942900), new kakao.maps.LatLng(35.15112513890, 128.31961883200), new kakao.maps.LatLng(35.15088879700, 128.31946541500), new kakao.maps.LatLng(35.15081951170, 128.31941050300), new kakao.maps.LatLng(35.15192584790, 128.31931324900), new kakao.maps.LatLng(35.15195680840, 128.31933835000), new kakao.maps.LatLng(35.15214988310, 128.31901059500), new kakao.maps.LatLng(35.15197135130, 128.31871350700), new kakao.maps.LatLng(35.15187005300, 128.31894879000), new kakao.maps.LatLng(35.15176817760, 128.31918541300), new kakao.maps.LatLng(35.15192584790, 128.31931324900)],
//];

for (var i = 0; i < polygonPaths2.length; i ++) {
// 지도에 표시할 산림폴리곤을 생성합니다
var polygon = new kakao.maps.Polygon({
    path:polygonPaths2[i], // 그려질 다각형의 좌표 배열입니다
    strokeWeight: 1, // 선의 두께입니다
    strokeColor: '#FFFF00', // 선의 색깔입니다
    strokeOpacity: 1, // 선의 불투명도 입니다 1에서 0 사이의 값이며 0에 가까울수록 투명합니다
    //fillColor: '#A2FF99', // 채우기 색깔입니다
    fillOpacity: 0 // 채우기 불투명도 입니다
});
// 지도에 다각형을 표시합니다
polygon.setMap(map);
};

const NAME_POSITIONS = [
{title: '<h3>J_2860</h3>', latlng: new kakao.maps.LatLng(35.2568259135, 128.272777665)},
{title: '<h3>J_2861</h3>', latlng: new kakao.maps.LatLng(35.2566087448, 128.27363347)},
];

</script>
</body>
</html>
